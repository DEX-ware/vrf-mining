\section{Introduction}
\label{sec:intro}

Bitcoin~\cite{nakamoto2008bitcoin} started the era of cryptocurrency.
% blockchain
In Bitcoin, each participant maintains its own ledger.
The ledger is structured as a blockchain, i.e., a chain of blocks of transactions.
% proof of work
Participants keep executing Proof-of-Work (PoW)-based consensus to agree on blocks and append them to the blockchain.
In PoW-based consensus, each participant keeps trying to solve a computationally hard PoW puzzle~\cite{dwork1992pricing}.
Once solving the puzzle, the participant appends his block to the blockchain and gets some coins as reward.
By adaptively adjusting the difficulty of PoW puzzles, PoW-based consensus can ensure only one participant solves the puzzle for each time period with high probability.
Participants of PoW-based consensus are also known as miners, the process of solving PoW puzzles is known as mining, and the computation power used for mining is known as mining power.

% why pooled mining
Due to the limited rate of producing blocks, a miner's reward can be highly volatile if he chooses to mine by himself.
To stabilise mining rewards, miners usually choose to join mining pools.
A mining pool allows miners to mine on blockchain in the name of the pool operator, and the pool operator distributes the mining reward to solo miners in a fine-grained way.
% Problems of having mining pools
While miners are willing to participate in mining pools, mining pools are considered harmful to blockchain ecosystem.
Mining pools lead to the centralisation of mining power, which contradicts Bitcoin's design objective - decentralisation.
% problem of centralisation
Mining power centralisation weakens PoW-based consensus' security.
A mining pool with sufficient mining power can perform various attacks to break PoW-based consensus, such as selfish mining~\cite{eyal2018majority} and 51\% attacks~\cite{nakamoto2008bitcoin}.
In addition, mining pools can censor transactions, i.e., decide which transactions to include in the blockchain.
% to date...
To date (01/12/2019), four largest mining pools control more than 51\% Bitcoin mining power~\cite{btc-com}, which can be a lurking threat to blockchain ecosystem.

This paper introduces \textit{VRF-based mining}, a surprisingly simple but effective approach to make pooled mining impossible.
VRF-based mining replaces hash functions in PoW-based consensus with Verifiable Random Functions (VRFs)~\cite{micali1999verifiable}.
VRF requires a miner to input its secret key to compute the output, so a pool operator should reveal his secret key to miners in order to outsource mining.
Thus, any miner can steal mining reward of a block owned by the pool operator anonymously.
Concretely, our contributions are as follows.

\textbf{VRF-based mining.} 
We replace the hash function in PoW-based consensus with a VRF.
A block in the blockchain should contain the VRF hash and its proof, but does not need to contain the digital signature.
Verifying the VRF hash can prove both the correctness of the hash and the authorship of the block in the same time.

\textbf{Non-outsourceability analysis.}
Miller et al.~\cite{miller2015nonoutsourceable} first formalises the \emph{non-outsourceable} mining problem and its \emph{non-outsourceability} property.
We find two orthogonal properties in \emph{non-outsourceability}, namely the punishment on pool operators and the unaccountability of punishing.
We then show VRF-based mining achieves the strongest notion of \emph{non-outsourceability} defined in Miller et al.~\cite{miller2015nonoutsourceable}.

\textbf{Instantiating VRF-based mining.}
VRF has four customisable components, namely the elliptic curve, two hash functions between strings and elliptic curve elements, and a normal hash function.
We discuss considerations on choosing them for VRF-based mining.

\textbf{Feasibility of VRF-based mining.}
We implement Elliptic curve-based VRF specified in~\cite{goldberg2017draft} using Go programming language, and compare its performance with three mainstream mining algorithms SHA256D, Scrypt and CryptoNight.
Our results show that VRF-based mining is easy to implement and introduces little overhead.

\textbf{Partial outsourcing is unrealistic.}
Partial outsourcing is that, a pool operator interactively outsources computation that does not need the secret key to miners.
We show that partial outsourcing is unprofitable, as it's both computation-intensive and I/O-intensive.
We also discuss how to instantiate VRFs to make it even more costly.

This paper is organised as follows.
\S\ref{sec:preliminaries} and \S\ref{sec:construction} describes preliminaries and the construction of VRF-based mining, respectively.
\S\ref{sec:non_outsourceability} revisits the definition of non-outsourceability, and shows VRF-based mining achieves better non-outsourceability than existing proposals.
\S\ref{sec:instantiation} discusses concerns of instantiating VRFs for VRF-based mining.
\S\ref{sec:practicality} provides an experimental analysis on the practicality of VRF-based mining.
\S\ref{sec:partial-outsourcing} discusses why partial outsourcing in VRF-based mining is unprofitable.
\S\ref{sec:discussions} discusses potential problems in VRF-based mining and their solutions.
\S\ref{sec:related} summaries related work, and \S\ref{sec:conclusion} concludes this paper.
We attach the pseudocode of the standardised EC-VRF construction~\cite{goldberg2017draft} in Appendix.
