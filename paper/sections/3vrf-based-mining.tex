\section{VRF-based mining}

\subsection{Our construction}

We replace hash function in mining by VRF, and thus construct VRF-based mining.

To rule out pooled mining, we combine VRF with digital signature scheme.
As the digital signature scheme used in cryptocurrency are based on Elliptic curve, we construct Elliptic curve based VRF for our VRF-based mining.
The standardised construction can be referred in the appendix~\ref{vrf_standardised_construction}.

% The desired properties of a well-designed hash function includes uniformity, deterministic, unpredictability and verifiability.
% As shown in appendix~\ref{vrf_standardised_construction}, ...
% Therefore, VRF fits in here.

In the case of solo mining, our sheme, which contains a miner side and a node side, works as follows. Note that we divide the blockheader into two part:
one part containing $pk$, $\beta$, and $\pi$ (which will be explained later);
and the other part not containing them.
We call the later part $\alpha$.

\subsubsection{Miner side\\}

A Miner performs minining as described in Algorithm ~\ref{algo:vft-mining-1}.

\begin{algorithm}[H]
\caption{VRF Mining Phase 1}
\label{algo:vft-mining-1}
\SetAlgoLined
  $(sk, pk) \gets \mathsf{VRFKeyGen}(1^{\lambda})$\;
  build a block template, including a coinbase transaction paying to the \texttt{scriptPubKey} of $pk$\;
  $\beta \gets \mathsf{VRFHash}(sk, \alpha)$\;
  \While{$\beta > target$}{
    alter the nonce in $\alpha$\;
    $\beta \gets \mathsf{VRFHash}(sk, \alpha)$\;
  }
  $\pi \gets \mathsf{VRFProve}(sk, \alpha)$\;
  submit $pk$, $\beta$, and the proof $\pi$ to the node.
\end{algorithm}

\subsubsection{Node side\\}

Upon receiving $pk$, $\beta$, and $\pi$, the node then performs Algorithm~\ref{algo:vft-mining-2}.

\begin{algorithm}[H]
\caption{VRF Mining Phase 2}
\label{algo:vft-mining-2}
\SetAlgoLined
\If{$\beta$ $\le$ target}{
    \If{$\mathsf{VRFVerify}(pk, \alpha, \beta, \pi)$}{
        \If{the coinbase transaction is paying to the \texttt{scriptPubKey} of $pk$}{
        record $pk$, $\beta$ and $\pi$ in the block\;
        produce a new block, with coinbase reward paying to the miner\;
        propogate the block to other nodes\;
        }
    }
}
\end{algorithm}

The $pk$, $\beta$ and $\pi$ are recorded in the blockheader, so that, when the block is propogated to other nodes, they can easily validate it via $\mathsf{VRFVerify}(pk, \alpha, \beta, \pi)$.



\subsection{Why pooled mining cannot work in our scheme}
\label{sec:discourage-pool}

% need private key
As shown in appendix~\ref{vrf_standardised_construction}, both $\mathsf{VRFHash}$ and $\mathsf{VRFProve}$ take secret key $sk$ as input.
That is to say, if a pool operator would like to provide pooled mining service and let miners participate, he will need to provide miners with his secret key.

% none would like to provide private key
However, none rational pool operator will tend to give out his secret key, as revealing his secret key give others the opportunity to redeem his balance or forge his identity.

Therefore, following our construction, we eliminate the intentionality of pooled mining and can reduce the centralisation of mining power significanlty.
