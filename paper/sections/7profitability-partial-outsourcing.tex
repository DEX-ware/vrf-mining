\section{Profitability of partial outsourcing}
\label{sec:partial-outsourcing}

The pool operator may still have opportunity to outsource mining partially.
$\mathsf{VRFHash}$ consists of three steps: $h \gets H_1(\alpha)$, $\gamma \gets h^{sk}$ and $\beta \gets H_2(\gamma)$.
The non-outsourceability is from the second step $\gamma = h^{sk}$, as it requires the knowledge of the pool operator's secret key $sk$.
The pool operator can outsource the first step $h = H_1(\alpha)$ by distributing different $\alpha$s to miners, and also the last step $\beta = H_2(\gamma)$ by distributing different $\gamma$s to miners.

However, such partial outsourcing is very inefficient and unprofitable compared to outsourcing in hash-based mining, due to the computing and I/O overhead.
In this section, we show that partial outsourcing in VRF-based mining is unprofitable as it's computation-intensive and I/O intensive.
We also show that making VRF fast can make VRF-based mining even more costly.

\subsection{Partial outsourcing in VRF-based mining}

\begin{figure}[htp]
    \centering
    \includegraphics[width=.7\linewidth]{figs/outsource-vrf.png}
    \caption{Partial outsourcing in VRF-based mining.}
    \label{fig:outsource-vrf}
\end{figure}

Figure~\ref{fig:outsource-vrf} describe the process of outsourcing $H_1$ and $H_2$.
In VRF-based mining, the second step $h^{sk}$ is non-outsourceable, but the pool operator can outsource $H_1$ or $H_2$ interactively.

To outsource $H_1$, the pool operator generates a search interval $[n_1, n_m]$ of nonces, then sends the interval and the block template $t$ to a miner.
After that, the miner computes $H_1$ with each nonce in $[n_1, n_m]$ as input, then sends back all $H_1$ hashes to the pool operator.
If the pool operator does not trust miners (which reflects to the real world), he will verify these $H_1$ hashes before the second step i.e., multiplying each hash with his secret key $sk$.

After the second step, the pool operator obtains a series of $(\gamma_1, \gamma_2, \dots, \gamma_m)$, and he can outsource $H_2$ as follows.
The pool operator first sends these $\gamma$s as well as the pool difficulty $PoolTarget$ to the miner.
Then, the miner calculates $H_2$ hashes of these $\gamma$s, compare the hashes with $PoolTarget$, and sends back $\gamma$s that satisfy the difficulty (denoted as $\Gamma$).
Similarly, the pool operator optionally verifies the correctness of each of $\Gamma$, and accumulates the mined shares to the miner's total contribution.


\subsection{The cost of verifying hashes from miners}

The first obstacle of partial outsourcing is verifying hashes from miners.
If the pool operator does not trust miners, he should verify both $H_1$ and $H_2$ hashes from miners.
Outsourcing $H_1$ is symmetric: The pool operator should verify all of $h_1, h_2, \dots, h_m$.
Outsourcing $H_2$ is asymmetric: The pool operator should only verify $\Sigma$ i.e., $\sigma$s satisfying $PoolTarget$.
This introduces significant overhead, and makes outsourcing less profitable than mining by himself for the pool operator.


\subsection{Partial outsourcing is I/O intensive}

The pool operator and miners are still possible to collaborate, as pooled mining is beneficial for them.
For the pool operator, he can earn some fees from the miners.
For the miners, they can stabilise their revenue from mining.

Even if they trust each other, partial outsourcing can still be unprofitable.
This is because of the second obstacle: the I/O overhead.
In hash-based mining, the pool operator only sends and receives constant-size data for each task.
To outsource $H_1$, the pool operator should receive all $H_1$ hashes computed by the miner.
To outsource $H_2$, the pool operator should send all $\gamma$s to the miner.

To make VRF-based mining maximally I/O-intensive, the mining algorithm embedded in VRFs should be lightweight.
Given the total mining power from miners, if the VRF is lightweight, the network hashrate will be higher.
With higher hashrate, the pool operator and the miners will exchange more data, leading to more communication overhead.